{% extends "groups/groups_base.html" %}

{% block title %}Teacher Portal{% endblock %}

{% block extra_css %}
<style>
  /* ---------- COLOR PALETTE ---------- */
  :root{
    --light:#b8f2c2;      /* light green  */
    --medium:#70c779;     /* medium green */
    --dark:#2f6a34;       /* dark green   */
    --text-dark:#103b0f;  /* deep green text */
    --text-light:#e4fbe4; /* light text */

    --card-bg:#ffffff;
    --radius:12px;
    --shadow:0 6px 18px rgba(0,0,0,.08);
    --shadow-sm:0 2px 8px rgba(0,0,0,.06);
  }

  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:'Segoe UI',Tahoma,sans-serif;
    background:var(--medium);
    color:#fff;
  }

  .action-grid{
    display:flex;
    flex-wrap:wrap;
    gap:1rem;
    margin:1.5rem 0;
    justify-content:center;
  }
  .action-card{
    background:var(--light);
    color:var(--text-dark);
    padding:1rem 1.25rem;
    border-radius:var(--radius);
    box-shadow:var(--shadow-sm);
    transition:transform .12s ease, box-shadow .12s ease;
    font-weight:500;
    min-width:180px;
    text-align:center;
    text-decoration:none;
  }
  .action-card:hover{
    transform:translateY(-2px);
    box-shadow:var(--shadow);
  }

  table{
    width:100%;
    border-collapse:separate;
    border-spacing:0;
    background:var(--card-bg);
    box-shadow:var(--shadow);
    border-radius:var(--radius);
    overflow:hidden;
    margin:1rem 0 2rem;
    color:var(--text-dark);
  }
  thead{background:var(--dark);color:var(--text-light)}
  thead th{padding:.75rem .9rem;font-weight:600;text-align:left;font-size:.9rem}
  tbody td{padding:.8rem .9rem;border-bottom:1px solid #e5e7eb;font-size:.9rem}
  tbody tr:last-child td{border-bottom:none}
  tbody tr:hover{background:#f0fff4}

  .badge{display:inline-block;padding:.25rem .55rem;border-radius:999px;font-size:.75rem;font-weight:600}
  .badge--ok{background:#dcfce7;color:#166534}
  .badge--warn{background:#fee2e2;color:#991b1b}
</style>
{% endblock %}

{% block content %}
  <h2 class="text-2xl font-bold mb-4">Teacher Portal</h2>

  {% if not request.user.is_authenticated %}
    <div class="action-grid">
      <a class="action-card" href="{% url 'group3:teacher_login' %}">Login</a>
      <a class="action-card" href="{% url 'group3:teacher_signup' %}">Become A Teacher</a>
    </div>

  {% else %}
    {% if teacher %}
      <p class="mb-4">Welcome, <strong>{{ request.user.username }}</strong>!</p>

      <div class="action-grid">
        <a class="action-card" href="{% url 'group3:teacher_profile' %}">View Profile</a>
        <a class="action-card" href="{% url 'group3:edit_profile' %}">Edit Profile</a>
        <a class="action-card" href="{% url 'group3:view_reviews' %}">View Reviews</a>
        <a class="action-card" href="{% url 'group3:create_timeslot' %}">Add New Timeslot</a>
        <a class="action-card" href="{% url 'group3:teacher_logout' %}">Logout</a>
      </div>

      {% if timeslots %}
        <h3 class="text-xl font-semibold mt-6 mb-2">Your Timeslots</h3>
        <table>
          <thead>
            <tr>
              <th>Start Time</th>
              <th>End Time</th>
              <th>Day</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for timeslot in timeslots %}
              <tr>
                <td>{{ timeslot.start_time|date:"Y-m-d H:i" }}</td>
                <td>{{ timeslot.end_time|date:"Y-m-d H:i" }}</td>
                <td>{{ timeslot.day_name }}</td>
                <td>
                  {% if timeslot.is_booked %}
                    <span class="badge badge--warn">Booked</span>
                  {% else %}
                    <span class="badge badge--ok">Available</span>
                  {% endif %}
                </td>
                <td>
                  {% if not timeslot.is_booked %}
                    <a href="{% url 'group3:edit_timeslot' timeslot.id %}">Edit</a>
                  {% else %}
                    &mdash;
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>You have no timeslots yet.</p>
      {% endif %}

    {% else %}
      <p class="mb-4">Hi {{ request.user.username }}, you havenâ€™t set up your teacher profile yet.</p>
      <div class="action-grid">
        <a class="action-card" href="{% url 'group3:teacher_signup' %}">Become A Teacher</a>
      </div>
    {% endif %}
  {% endif %}

  <p class="mt-6">
    <a href="{% url 'group3:group3' %}" class="text-white hover:underline">
      &larr; Back to Home
    </a>
  </p>
{% endblock %}
